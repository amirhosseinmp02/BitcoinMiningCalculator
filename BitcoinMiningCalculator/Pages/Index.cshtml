@page
@model BitcoinMiningCalculator.Pages.IndexModel

<!DOCTYPE html>

<html lang="fa">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width , inicial-scale=1.0">
    <title>ماشین حساب استخراج بیت کوین</title>
    <link rel="stylesheet" href="~/Css/reset.css">
    <link rel="stylesheet" href="~/Css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="~/Images/logo.png"
          sizes="32x32">
</head>

<body>

    <div class="site">
        <header class="header">
            <a href="https://amirhosseinmp02.ir"><img src="~/Images/logo.png" alt="Logo"></a>
            <h1>ماشین حساب استخراج بیت کوین</h1>
        </header>
        <main class="main">
            <div id="fmain">
                <div class="content">
                    <h2>
                        <b>قیمت فعلی BTC</b><br>@Model.BitcoinCalculatorViewModel.BitcoinToUsdPrice.ToString("C0")<br>@Model.BitcoinCalculatorViewModel.BitcoinToTomanPrice.ToString("##,###")
                        <label><b>تومان</b></label>
                    </h2>
                    <h2><b>الگوریتم</b><br>SHA-256<br><b>پاداش بلاک</b><br>@Model.BitcoinCalculatorViewModel.BlockReward</h2>
                    <h2><b>سختی شبکه</b><br>@($"{Model.BitcoinCalculatorViewModel.NetworkDifficulty.ToString().Substring(0, 8)}M")<br><b>دلار سنا</b><br>@Model.BitcoinCalculatorViewModel.UsdToTomanPrice.ToString("##,###") تومان</h2>
                </div>
                <form class="form"
                      role="form"
                      action="/"
                      asp-antiforgery="true"
                      data-ajax="true"
                      data-ajax-loading="#loading"
                      data-ajax-method="POST"
                      data-ajax-success="SuccessSubmit"
                      data-ajax-failure="FailureSubmit">
                    <div>
                        <input type="number" step="any" placeholder="هش ریت (TH/s)" asp-for="BitcoinCalculatorViewModel.HashRate" id="hashtext">
                        
                        <select id="hashselect" onchange="hash();">
                            <option value="14.5" id="1350" selected="selected">Antminer S9j</option>
                            <option value="10" id="1432">Antminer T9+</option>
                            <option value="68" id="3360">Whatsminer M20S</option>
                            <option value="56" id="3360">Whatsminer M21S</option>
                            <option value="12.5" id="2050">Whatsminer M3 V2</option>
                            <option value="11.5" id="2000">Whatsminer M3 V1</option>
                            <option value="56" id="2520">Antminer S17</option>
                            <option value="13.5" id="1420">Ebit E9i</option>
                            <option value="20.5" id="1530">Antminer S11</option>
                            <option value="40" id="2200">Antminer T17</option>
                            <option value="18" id="1650">Ebit E10</option>
                            <option value="custom">سایر</option>
                        </select>
                    </div>
                    <input type="number" step="any" asp-for="BitcoinCalculatorViewModel.ElectricityConsumed" id="wselect" placeholder="برق مصرفی (W)">
                    
                    <div>
                        <input type="number" step="any" asp-for="BitcoinCalculatorViewModel.CostPerKilowattOfElectricity" id="electext" placeholder="هزینه هر کیلووات (تومان)">
                        
                        <select id="elecselect" onchange="elec();">
                            <option value="290" selected="selected">خانگی</option>
                            <option value="92">صنعتی</option>
                            <option value="52">کشاورزی</option>
                            <option value="965">متوسط صادراتی</option>
                        </select>
                    </div>

                    <input type="number" step="any" asp-for="BitcoinCalculatorViewModel.PoolFee" placeholder="کارمزد استخر">
                    
                    <input type="hidden" asp-for="BitcoinCalculatorViewModel.BlockReward" />
                    <input type="hidden" asp-for="BitcoinCalculatorViewModel.NetworkDifficulty" />
                    <input type="hidden" asp-for="BitcoinCalculatorViewModel.BitcoinToUsdPrice" />
                    <input type="hidden" asp-for="BitcoinCalculatorViewModel.BitcoinToTomanPrice" />
                    <button>محاسبه</button>
                    <div asp-validation-summary="None"></div>
                    <span id="loading" style="display: none;">در حال محاسبه...</span>
                    <div id="error"></div>
                </form>
            </div>
            <table>
                <tbody>
                    <tr>
                        <th></th>
                        <th><b>بیتکوین</b></th>
                        <th><b>دلار</b></th>
                        <th><b>برق</b></th>
                        <th><b>تومان</b></th>
                    </tr>
                    <tr>
                        <th><b>روزانه</b></th>
                        <th id="bitcoin_day">0</th>
                        <th id="dollar_day">0</th>
                        <th id="bargh_day">0</th>
                        <th id="toman_day">0</th>
                    </tr>
                    <tr>
                        <th><b>هفتگی</b></th>
                        <th id="bitcoin_week">0</th>
                        <th id="dollar_week">0</th>
                        <th id="bargh_week">0</th>
                        <th id="toman_week">0</th>
                    </tr>
                    <tr>
                        <th><b>ماهانه</b></th>
                        <th id="bitcoin_month">0</th>
                        <th id="dollar_month">0</th>
                        <th id="bargh_month">0</th>
                        <th id="toman_month">0</th>
                    </tr>
                    <tr>
                        <th><b>سالانه</b></th>
                        <th id="bitcoin_year">0</th>
                        <th id="dollar_year">0</th>
                        <th id="bargh_year">0</th>
                        <th id="toman_year">0</th>
                    </tr>
                </tbody>
            </table>
        </main>
        <footer class="footer">
            <div class="social">
                <a href="https://github.com/amirhosseinmp02"><i class="fa fa-github" aria-hidden="true"></i></a>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="~/Js/app.js"></script>
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js" integrity="sha512-DedNBWPF0hLGUPNbCYfj8qjlEnNE92Fqn7xd3Sscfu7ipy7Zu33unHdugqRD3c4Vj7/yLv+slqZhMls/4Oc7Zg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        SuccessSubmit = function (response) {
            $("#error").hide();

            $("#bargh_day").text(response.electricityConsumedCostForADay);
            $("#bargh_week").text(response.electricityConsumedCostForAWeek);
            $("#bargh_month").text(response.electricityConsumedCostForAMonth);
            $("#bargh_year").text(response.electricityConsumedCostForAYear);

            $("#bitcoin_day").text(response.bitcoinADayIncome);
            $("#bitcoin_week").text(response.bitcoinAWeekIncome);
            $("#bitcoin_month").text(response.bitcoinAMonthIncome);
            $("#bitcoin_year").text(response.bitcoinAYearIncome);

            $("#dollar_day").text(response.usdADayIncome);
            $("#dollar_week").text(response.usdAWeekIncome);
            $("#dollar_month").text(response.usdAMonthIncome);
            $("#dollar_year").text(response.usdAYearIncome);

            $("#toman_day").text(response.finalADayIncomeInToman);
            $("#toman_week").text(response.finalAWeekIncomeInToman);
            $("#toman_month").text(response.finalAMonthIncomeInToman);
            $("#toman_year").text(response.finalAYearIncomeInToman);

            $("#error").text("");

            ConvertNumbersToPersian();
    };

    FailureSubmit = function (xhr) {
        $('#error').text("مشکلی در زمان محاسبه رخ داد .");
        $('#error').show();
    };
    </script>

</body>

</html>